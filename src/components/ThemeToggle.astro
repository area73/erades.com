---
import { Sun, Moon } from "@lucide/astro";
interface Props {}
---

<button
  id="theme-toggle-btn"
  type="button"
  aria-label="Toggle dark mode"
  class="h-9 w-9 flex items-center justify-center rounded-full bg-transparent hover:bg-secondary/50 transition-colors focus:outline-none"
>
  <span class="inline-flex">
    <Moon
      id="moon-icon"
      class="h-4 w-4 text-muted-foreground hover:text-foreground transition-colors inline dark:hidden"
    />
    <Sun
      id="sun-icon"
      class="h-4 w-4 text-muted-foreground hover:text-foreground transition-colors hidden dark:inline"
    />
  </span>
</button>
<script is:inline>
  if (typeof window !== "undefined") {
    // Al cargar, aplicar preferencia guardada
    const theme = localStorage.getItem("theme");
    if (theme === "dark") {
      document.documentElement.classList.add("dark");
    } else if (theme === "light") {
      document.documentElement.classList.remove("dark");
    }
    const btn = document.getElementById("theme-toggle-btn");
    btn.addEventListener("click", () => {
      const isDark = document.documentElement.classList.toggle("dark");
      localStorage.setItem("theme", isDark ? "dark" : "light");
    });
  }
</script>
